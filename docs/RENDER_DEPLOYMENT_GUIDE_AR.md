# دليل النشر على Render.com

## خطوات النشر التلقائي (باستخدام API)

1. قم بتعديل ملف `deploy-to-render.ps1` وتعيين رمز API الخاص بك:
   ```powershell
   $ApiToken = "YOUR_RENDER_API_TOKEN"
   ```

2. قم بتشغيل سكربت النشر من PowerShell:
   ```powershell
   .\deploy-to-render.ps1
   ```

3. انتظر حتى يكتمل النشر وستحصل على عنوان URL للواجهة الخلفية.

4. يمكنك التحقق من حالة النشر باستخدام سكربت `check-render-deployment.ps1`:
   ```powershell
   # أولاً، قم بتعيين رمز API ومعرف الخدمة في الملف
   .\check-render-deployment.ps1
   ```

## خطوات النشر اليدوي

إذا واجهت مشكلة في النشر التلقائي، يمكنك النشر يدويًا:

1. قم بزيارة https://dashboard.render.com/
2. انقر على "New +" واختر "Web Service"
3. اختر "Build and deploy from a .zip file"
4. ارفع ملف `backend-deploy-ready.zip` الخاص بك
5. قم بتكوين الخدمة باستخدام هذه الإعدادات:
   - الاسم: mshkat-api
   - بيئة التشغيل: Node
   - أمر البناء: npm install
   - أمر البدء: node index.js
6. في قسم متغيرات البيئة، أضف:
   - NODE_ENV: production
   - PORT: 10000
   - JWT_SECRET: mshkat-stor-secret-key-2025-production-secure-token-authentication-system-v1.0
7. في قسم الأقراص، أضف قرصًا جديدًا:
   - الاسم: data
   - مسار التثبيت: /opt/render/project/src/data
   - الحجم: 1 GB

## استكشاف المشكلات وإصلاحها

### المشكلة: النشر يستغرق وقتًا طويلاً
- هذا طبيعي للنشر الأول، خاصة في الخطة المجانية من Render
- انتظر 5-10 دقائق للنشر الأولي

### المشكلة: ظهور أخطاء أثناء عملية البناء
- تحقق من سجلات البناء في لوحة تحكم Render
- تأكد من أن ملف `package.json` يحتوي على جميع التبعيات المطلوبة

### المشكلة: الخدمة تعمل ولكن لا يمكن الوصول إلى الواجهة الخلفية
- تحقق من إعدادات CORS في ملف `index.js`
- تأكد من إضافة نطاق الواجهة الأمامية إلى قائمة الأصول المسموح بها

### المشكلة: فقدان البيانات بعد إعادة تشغيل الخدمة
- تأكد من إعداد القرص الدائم بشكل صحيح
- تحقق من صحة مسار تخزين البيانات في التطبيق

### المشكلة: الخدمة بطيئة أو تتوقف بعد فترة من عدم النشاط
- هذا هو السلوك الطبيعي للخطة المجانية من Render
- قم بالترقية إلى خطة مدفوعة للحصول على أداء أفضل وتشغيل مستمر

## تكوين الواجهة الأمامية للاتصال بالواجهة الخلفية

بعد نشر الواجهة الخلفية، يجب تكوين الواجهة الأمامية للاتصال بها:

1. قم بتعديل متغير `REACT_APP_API_URL` في إعدادات الواجهة الأمامية ليشير إلى عنوان URL الخاص بالواجهة الخلفية
2. أعد نشر الواجهة الأمامية

## الخطوات التالية

- قم بمراقبة أداء الخدمة باستخدام أدوات المراقبة في Render
- قم بإعداد نسخ احتياطية منتظمة للبيانات
- قم بتحديث التطبيق عند الحاجة عن طريق إعادة النشر

لمزيد من المعلومات، راجع وثائق Render الرسمية: https://render.com/docs
