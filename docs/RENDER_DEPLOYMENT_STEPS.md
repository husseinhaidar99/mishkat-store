# خطوات نشر موقع مشكاة على Render.com

تم تجهيز مشروعك للنشر على منصة Render.com. هذه الوثيقة ستوجهك خلال عملية النشر خطوة بخطوة.

## الخطوة 1: إنشاء حساب على Render.com

1. قم بزيارة [Render.com](https://render.com)
2. انقر على زر "Sign Up" (التسجيل)
3. يمكنك التسجيل باستخدام:
   - حسابك على GitHub (أسهل خيار)
   - حسابك على Google
   - بريدك الإلكتروني وكلمة مرور

## الخطوة 2: رفع المشروع على GitHub

1. قم بإنشاء حساب على GitHub إذا لم يكن لديك حساب
2. أنشئ مستودع (repository) جديد
3. قم برفع مشروعك إلى GitHub باستخدام الأوامر التالية:

```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/USERNAME/mshkat-store.git
git push -u origin main
```

> ملاحظة: استبدل `USERNAME` باسم المستخدم الخاص بك على GitHub

## الخطوة 3: نشر المشروع على Render.com

### 3.1: خيار النشر السريع (باستخدام render.yaml)

1. في لوحة تحكم Render.com، انقر على "Blueprint" في القائمة الجانبية
2. انقر على "New Blueprint Instance"
3. اختر المستودع الذي رفعت إليه المشروع
4. سيكتشف Render.com ملف `render.yaml` ويقوم بإعداد الخدمات تلقائياً
5. راجع الإعدادات وانقر على "Apply"

### 3.2: خيار النشر اليدوي

#### نشر الواجهة الخلفية (API):

1. في لوحة تحكم Render.com، انقر على "New +" واختر "Web Service"
2. اختر المستودع الذي رفعت إليه المشروع
3. املأ المعلومات التالية:
   - **Name**: `mshkat-api`
   - **Region**: اختر المنطقة الأقرب إليك (Frankfurt للشرق الأوسط)
   - **Branch**: `main` (أو `master` حسب اسم الفرع الرئيسي)
   - **Runtime**: `Node`
   - **Root Directory**: `backend`
   - **Build Command**: `npm install`
   - **Start Command**: `node index.js`
   - **Plan**: اختر "Free"

4. انقر على "Advanced" وأضف المتغيرات البيئية التالية:
   - `NODE_ENV`: `production`
   - `JWT_SECRET`: (أدخل مفتاح سري طويل وآمن)

5. انقر على "Create Web Service"

#### نشر الواجهة الأمامية:

1. في لوحة تحكم Render.com، انقر على "New +" واختر "Static Site"
2. اختر نفس المستودع
3. املأ المعلومات التالية:
   - **Name**: `mshkat-frontend`
   - **Branch**: نفس الفرع المستخدم للواجهة الخلفية
   - **Root Directory**: `islamic-gifts-shop`
   - **Build Command**: `npm install && npm run build`
   - **Publish Directory**: `build`
   - **Plan**: اختر "Free"

4. انقر على "Advanced" وأضف المتغير البيئي التالي:
   - `REACT_APP_API_URL`: (أدخل رابط خدمة API الذي تم إنشاؤه، مثل `https://mshkat-api.onrender.com`)

5. انقر على "Create Static Site"

## الخطوة 4: ربط الخدمات

بعد نشر كل من الواجهة الخلفية والواجهة الأمامية، يجب تأكيد أن الواجهة الأمامية تتصل بالواجهة الخلفية بشكل صحيح:

1. انتظر حتى يتم نشر كلتا الخدمتين بنجاح
2. انسخ رابط خدمة API (مثل `https://mshkat-api.onrender.com`)
3. انتقل إلى إعدادات موقعك الثابت
4. أضف أو عدّل المتغير البيئي `REACT_APP_API_URL` ليصبح رابط API الخاص بك
5. انقر على "Save Changes" ثم "Manual Deploy" > "Deploy latest commit"

## الخطوة 5: اختبار الموقع

1. انتظر حتى يكتمل نشر جميع الخدمات
2. انتقل إلى رابط الواجهة الأمامية (مثل `https://mshkat-frontend.onrender.com`)
3. تأكد من أن جميع وظائف الموقع تعمل بشكل صحيح:
   - عرض المنتجات
   - تسجيل دخول المدير
   - إدارة المنتجات والفئات
   - تحميل الصور

## ملاحظات هامة

1. **الطبقة المجانية**: تحتوي على بعض القيود:
   - 500 ساعة تشغيل شهرياً
   - توقف الخدمة بعد فترة من عدم الاستخدام
   - يمكنها أن تكون بطيئة في البداية عند إعادة التشغيل

2. **تخزين البيانات**: البيانات المخزنة في ملفات JSON على Render غير دائمة بشكل افتراضي. لذلك، تم تكوين قرص دائم في ملف `render.yaml`.

3. **الترقية**: إذا كنت ترغب في تحسين أداء الموقع، يمكنك الترقية إلى خطة مدفوعة تبدأ من $7 شهرياً.

4. **النطاق المخصص**: يمكنك إعداد نطاق مخصص (مثل mshkat.com) باتباع الخطوات في قسم "Custom Domains" في لوحة تحكم Render.
